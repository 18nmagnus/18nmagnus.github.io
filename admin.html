<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="UTF-8">
        <title>SciHound - Login</title>
        <link rel="stylesheet" type="text/css" href="./stylesheets/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./stylesheets/normalize.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./stylesheets/form.css" media="screen">
    </head>

    <body>
        <!-- The core Firebase JS SDK is always required and must be listed first -->
        <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-app.js"></script>

        <!-- TODO: Add SDKs for Firebase products that you want to use
        https://firebase.google.com/docs/web/setup#available-libraries -->
        <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-analytics.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.16.1/firebase-auth.js"></script>

        <script>
            // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyB-NS4PfFihzVFhZRNXzD0obUZuaBIirso",
                authDomain: "scihound-776c7.firebaseapp.com",
                databaseURL: "https://scihound-776c7.firebaseio.com",
                projectId: "scihound-776c7",
                storageBucket: "scihound-776c7.appspot.com",
                messagingSenderId: "667225946605",
                appId: "1:667225946605:web:bde09af987c1fb64044fe4",
                measurementId: "G-MQSTQVRLKP"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            firebase.analytics();
        </script>
        

        <header class="page-header fill-screen">
            <h1 class="project-name">User Login</h1>
            <h2 class="project-tagline">Log in to see collected point data.</h2>
            <a href="./index.html" class="btn">Return to Home Page</a>
            <br />

            <label class="form-heading">
                Email:
                <input class="input" type="email" id="email" name="email" required>
            </label>
            <br />
            <label class="form-heading"> 
                Password:
                <input class="input" type="password" id="password" name="password" required>
            </label>
            <br />
            <button class="form-btn" type="submit" id="submitButton">Submit</button>
        </header>

        <script>

            /**
            * initApp handles setting up UI event listeners and registering Firebase auth listeners:
            *  - firebase.auth().onAuthStateChanged: This listener is called when the user is signed in or
            *    out, and that is where we update the UI.
            */
            function initApp() {
                // Listening for auth state changes.
                // [START authstatelistener]
                firebase.auth().onAuthStateChanged(function (user) {
                    if (user) {
                        // User is signed in
                        location.href = "./data.html";
                    }
                });
                // [END authstatelistener]
            }

            window.onload = function() {
                initApp();
            };

            document.getElementById("submitButton").onclick = function () {
                if (firebase.auth().currentUser) {
                        // [START signout]
                        firebase.auth().signOut();
                        // [END signout]
                }
                var email = document.getElementById('email').value;
                var password = document.getElementById('password').value;
                if (email.length == 0) {
                    alert('Please enter an email address.');
                    return;
                }
                if (password.length == 0) {
                    alert('Please enter a password.');
                    return;
                }

                // Sign in with email and pass.
                // [START authwithemail]
                firebase.auth().signInWithEmailAndPassword(email, password).catch(function (error) {
                    // Handle Errors here.
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    // [START_EXCLUDE]
                    if (errorCode === 'auth/wrong-password') {
                        alert('Wrong password.');
                    } else {
                        alert(errorMessage);
                    }
                    console.log(error);
                    // [END_EXCLUDE]
                });
                // [END authwithemail]
                };
        </script>

    </body>


</html>